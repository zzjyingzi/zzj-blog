title: "javascript-作用域链、闭包与构造的联系"
date: 2015-05-15 21:43:50
tags:
---
---
“javascript语言的作用域由自其定义的位置确定。”

“对函数构造将会创建新的作用域。”

“javascript语言结构上是一个广义上的闭包系统。”

这三句是转述的，其中第一句为基础，出自《javascript权威指南》，这句在一般环境中基于作用域的概念。
* 方法（函数，以下同）定义在全局当中，其作用域就基于全局；
* 变量定义在方法内部，其作用域就基于方法，即在方法内有效；
* b方法定义在a方法内，b方法的作用域就存在于a中；
* 在方法内部有一种方式可以将方法内的变量返回至全局中，即return；
* 当return的对象为b方法时，由于b方法的作用域由定义位置确定，所以在调用return的方法时，b会携带其内的值出来；
* 对前一句的另一种解释：方法会在其定义的位置和调用的位置之间建立起作用域链（全局方法作用域链为全局，或称宿主对象）；
* 第三种说法是：定义的方法掉其被调用前其作用域内的值不会被释放掉。

构造函数会创建新的作用域，因此：
-----
return function(){}与return new function(){}其作用域是不同的。这一方式在jquery源码中被用于隔离作用域，避免当前的this指向上一个输入的元素对象（或对象组）。